const { bsv, buildContractClass, getPreimage, toHex, num2bin, Ripemd160, SigHashPreimage, signTx, PubKey, Sig, Bytes } = require("scryptlib");
const { DataLen, loadDesc, createLockingTx, createPayByOthersTx, sendTx, reverseEndian, satoTxSigUTXOSpendBy, unlockP2PKHInput, showError } = require("../helper");
// const { privateKey } = require("../privateKey");

const DataLen8 = 8;
const DataLen4 = 4;

(async () => {
  const privateKeyIssuer = new bsv.PrivateKey.fromWIF("cPbFsSjFjCbfzTRc8M4nKNGhVJspwnPQAcDhdJgVr3Pdwpqq7LfA");
  const publicKeyIssuer = bsv.PublicKey.fromPrivateKey(privateKeyIssuer);
  const publicKeyHashIssuer = bsv.crypto.Hash.sha256ripemd160(publicKeyIssuer.toBuffer());
  console.log("pkhIssuer:", toHex(publicKeyHashIssuer)); // d3e990e3d6802a033c9b8d3c2ceda56dc0638126

  const privateKey = privateKeyIssuer;

  const privateKeyReceiver1 = new bsv.PrivateKey.fromWIF("cRCsQuoGatjXDdzjYhb1r3RH8LDqCEvjNc8gYS7HcnodPf44guQG");
  const publicKeyReceiver1 = bsv.PublicKey.fromPrivateKey(privateKeyReceiver1);
  const publicKeyHashReceiver1 = bsv.crypto.Hash.sha256ripemd160(publicKeyReceiver1.toBuffer());
  console.log("pkhReceiver1:", toHex(publicKeyHashReceiver1)); // 2edcd18e10de1a646169b19e3c83ec404c8685bd

  const privateKeyReceiver2 = new bsv.PrivateKey.fromWIF("cNLWqaouzifBDZL44C7beiSUWt8k4R6Gj2fnG2tgqdAVSHpYv8He");
  const publicKeyReceiver2 = bsv.PublicKey.fromPrivateKey(privateKeyReceiver2);
  const publicKeyHashReceiver2 = bsv.crypto.Hash.sha256ripemd160(publicKeyReceiver2.toBuffer());
  console.log("pkhReceiver2:", toHex(publicKeyHashReceiver2)); // 36d163b7bb8808077b768091fe93c3be55f44b15

  const Signature = bsv.crypto.Signature;
  const sighashType = Signature.SIGHASH_ANYONECANPAY | Signature.SIGHASH_ALL | Signature.SIGHASH_FORKID;

  const actionIssue = "00";
  const actionTransfer = "01";

  const genisisOutpointTxId = "0229e3505156e0456747a4dfdd66b48994223e75ed97e746fec84c018d12fcde";
  const genesisOutpoint = reverseEndian(genisisOutpointTxId) + num2bin(1, DataLen4);
  const genesisPreTxHex =
    "0100000001b6743ff6f19a2022f2cd618cfda195c082948c96f4252430bf9b56b7d5830cd7000000006a47304402202479f587a86482e8957b3df26d18795635cfdbc21036ed6463a1625402d5750e02205b406779159dd7cff3579edab91f13ede593b52f21021e8254ad5b385d5e010d412102fac240917b1bc22871af783b9a958661bc2b497b27f571a32fe6988e8ad2b38fffffffff021027000000000000fd570a5101405158012101005157790087636158796100792097dfd76851bf465e8f715593b217714858bbe9570ff3bd5e33840a34e20ff0262102ba79df5f8ae7604a9830f03c7933028186aede0675a16f025dc4f8be8eec0382210ac407f0e4bd44bfc207355a778b046225a7068fc59ee7eda43ad905aadbffc800206c266b30e6a1319c66dc401e5bd6b432ba49688eecd118297041da8074ce0810201008ce7480da41702918d1ec8e6849ba32b4d65b1e40dc669c31a1e6306b266c5d795d79855679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac7777777777777777776177616961587961007901687f7700005279007f77517f75007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a6868685179777777776177610079827700795779945579945194527951797f755379537951947f770079577987695479547951947f7553795b79937f770112795179ac69557954795c79937f7554797f77815379517951935d79807e52797e59797e61007901137900795e79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761557953795f79807e0115797e5a797e61007901147900796079806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761527951797eaa007961011579007982775179517958947f7551790128947f7777776187777777777777777777777777777777777777777777777777776757795187636158796100792097dfd76851bf465e8f715593b217714858bbe9570ff3bd5e33840a34e20ff0262102ba79df5f8ae7604a9830f03c7933028186aede0675a16f025dc4f8be8eec0382210ac407f0e4bd44bfc207355a778b046225a7068fc59ee7eda43ad905aadbffc800206c266b30e6a1319c66dc401e5bd6b432ba49688eecd118297041da8074ce0810201008ce7480da41702918d1ec8e6849ba32b4d65b1e40dc669c31a1e6306b266c5d795d79855679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac7777777777777777776177616961587961007901687f7700005279007f77517f75007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a6868685179777777776177610079827700795579945194527951797f755379537951947f770079567987695479547951947f7553797f770111795179ac6952790111797e57797e61007901117900795d79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e7777610079aa61011179007982775179517958947f7551790128947f77777761877777777777777777777777777777777777777777670068686a230103fefefcf19542eab5515141211c567b9424eef9585866668ae2295dbdec77d2d5002ce17900000000001976a914d3e990e3d6802a033c9b8d3c2ceda56dc063812688ac00000000";

  console.log("genesis Tx outpoint: ", genesisOutpoint);

  try {
    const NonFungibleToken = buildContractClass(loadDesc("nft_desc.json"));
    const token = new NonFungibleToken(
      0x3d7b971acdd7bff96ca34857e36685038d9c91e3af693cf9e71d170a8aac885b62dd4746fe7ebd7f3d7d16a51d63aa86a4256bdc853d999193ec3e614d4917e3dde9f6954d1784d5a2580f6fb130442e6a8ad0850aeaa100920fcab9176a05eb1aa3b5ee3e3dc75ae7cde3c25d350bba92956c8bacb0c735d39240c6442bab9dn
    );

    // set token id start
    uniqTokenId = 0;

    // append state as passive data part, initial uniqTokenId
    token.setDataPart(genesisOutpoint + toHex(publicKeyHashIssuer) + num2bin(uniqTokenId, DataLen8) + actionIssue);

    let issueSatoshis = 5000;
    const FEE = 15000;
    let transferSatoshis = 5000;

    if (false) {
      // lock fund to the script & issue the first token
      const lockingTx = await createLockingTx(privateKey.toAddress(), issueSatoshis, FEE);

      console.log("prevtxid:", toHex(lockingTx.inputs[0].prevTxId));
      console.log("prevtxindex:", lockingTx.inputs[0].outputIndex);

      lockingTx.outputs[0].setScript(token.lockingScript);
      lockingTx.sign(privateKey);
      let lockingTxid = await sendTx(lockingTx);
      // let lockingTxid = lockingTx.id;
      console.log("funding txid:      ", lockingTxid);
      console.log("funding txhex:      ", lockingTx.serialize());

      return;
    }

    // increment token ID and issue another new token
    /* from genesis issue */
    let preUtxoTxId = genisisOutpointTxId;
    let preUtxoOutputIndex = 1;
    let preUtxoTxHex = genesisPreTxHex;

    let issueTxid = "8ca9949e651fd84d670f6121af59d558dfce0addbf6aa59f5cdc888f9df4dcf3";
    let issueTxHex =
      "0100000005defc128d014cc8fe46e797ed753e229489b466dddfa4476745e0565150e32902010000006b483045022100f55e4d9c7a16b8ec8b7325d727cd1fe29249f8f49a85595a01cc213720154896022047fe26067cfcd36f3bc08100ac060fd7d6ec64a17a2651643f6fc51456ade84c412102fac240917b1bc22871af783b9a958661bc2b497b27f571a32fe6988e8ad2b38fffffffff437169ab011e56c54f5ffbebf2b78c6d70c2543a348bb9a6f13da2c5e5c79dbe000000006a47304402204144bc0fc86a9ddee41a7e41449deebe2a6f16af1c922b204f2aa9f122ebb736022064283171cbd617ef6d4fe2094f8fcf3a8544db55bb91960abbccdb18f5441336412102fac240917b1bc22871af783b9a958661bc2b497b27f571a32fe6988e8ad2b38fffffffff549d9b8ae6988c58711c4dbc64ef9f6bb4c78b8475f75594d2d7a533fab07ef3010000006b483045022100b6ee2ab3b9e03d724fcbd0287b0bc50f19fb6c092143c238e55a8aeed00b885a02200aa17b47720bdcdd83859aa6346f965212ba54d2fc37bc16a248078e3e62c58c412102fac240917b1bc22871af783b9a958661bc2b497b27f571a32fe6988e8ad2b38fffffffffffe2b7d3d8feda30401a4e9c03f253015026448d67263280bcb8856ff65c78da000000006b483045022100ae38ac8977fc60af5e007968e0a26cd60abb7eea882bcf4734eca69eefc692fa022077e4f8d5a9117931e1b1e043da23f8ef8a1c0f3dca43c5ad8b3fc80381ee4507412102fac240917b1bc22871af783b9a958661bc2b497b27f571a32fe6988e8ad2b38fffffffff9d9be4a0f30aedcf16753025bc598f9eb2daaaa2f864a00f2dd17afc447f24f6000000006a4730440220380d21ebd7f83af9f3473011bf173e175e7d68dadb48e948283e769e8147596f022061cb837fc642e1c8279ed0ab59564e8496f078a84a30e1906d13d2c3224681c8412102fac240917b1bc22871af783b9a958661bc2b497b27f571a32fe6988e8ad2b38fffffffff028813000000000000fddd1451014001800176018801a901ac5801142464697361626c654f687465725574786f4d6f76696e6746726f6d47656e657369735478210100514c809dab2b44c64092d335c7b0ac8b6c9592ba0b355dc2e3cde75ac73d3eeeb5a31aeb056a17b9ca0f9200a1ea0a85d08a6a2e4430b16f0f58a2d584174d95f6e9dde317494d613eec9391993d85dc6b25a486aa631da5167d3d7fbd7efe4647dd625b88ac8a0a171de7f93c69afe3919c8d038566e35748a36cf9bfd7cd1a977b3d5d790087635a795d79855c798561011879517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac7777777777777777776177777777777777616961011879007901687f7501447f777761007901247f7501207f7700548087696101197961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079587987695179012054935b79935893519394537951790124937f7551797f77615779011f79011f79011f79011f7900000061615c7959795b79014c587982775179a0696161615979597959795e796161527952797e0079a8007982775296517951797f75a8527952797f77a87e77777761007901007e817761547955799552799751795379979c695177777777776169615a79007901687f7501447f777761007901207f755a7901207f758769005a7901200124937f7501207f7700795679876351527a75517a675b7982775479567993012493a0695b7954795679930124937f7554797f77577956790124937f75876351527a75517a68685179518769517777777777777761695c795c7951947f755c79519458947f77815d795b790120935493011679937f755b7901209354937f77012379a951798769012479012479ac695e795c797f7561012979616100790079827751795179012c947f7551790134947f77777761007901007e817761776151795d797e53797e54795193011a79807e0116797e61007952790079011c79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e77776153795f797e0127797e56795193011c79807e0117797e6100790127790079011e79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761610126790121790120797e011d797e51797e0121797e011f797e77616100790127790079012079806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761547953797e51797eaa007961013279007982775179517958947f7551790128947f77777761877777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777675d795187635a795d79855c798561011879517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac777777777777777777617777777777777761696101187961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079567987695179012054935a79935893519394615579011d79011d79011d79011d7900000061615b790111795a79014c587982775179a0696161615979597959795e796161527952797e0079a8007982775296517951797f75a8527952797f77a87e77777761007901007e817761547955799552799751795379979c695177777777776169615a79007901687f7501447f777761007901207f755a7901207f758769005a7901200124937f7501207f7700795679876351527a75517a675b7982775479567993012493a0695b7954795679930124937f7554797f77577956790124937f75876351527a75517a68685179518769517777777777777761695b7959790120935493011379937f75597901209354937f77012079a951798769012179012179ac695c795c7951947f755c79519458947f775d795b797f755e795c790124937f755c797f77517951797e0123797e53797e0113797e6100790123790079011a79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e77776161012279011d79011c797e0119797e51797e011d797e011b797e77616100790123790079011c79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761527951797eaa007961012e79007982775179517958947f7551790128947f777777618777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777675d795287635a795d79855c798561011379517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac777777777777777777617777777777777761696101137961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079567987695179012054935a799358935193945379517901209354935b79937f75517901209354937f77011679a951798769011779011779ac696101157960795f797e5c797e51797e60797e5e797e776161007901167900795f79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e7777610079aa007961011c79007982775179517958947f7551790128947f77777761877777777777777777777777777777777777777777777777777777777767006868686a41defc128d014cc8fe46e797ed753e229489b466dddfa4476745e0565150e3290201000000d3e990e3d6802a033c9b8d3c2ceda56dc06381260000000000000000005c29ba01000000001976a914d3e990e3d6802a033c9b8d3c2ceda56dc063812688ac00000000";
    uniqTokenId = 0;
    let spendByIssueTxId = issueTxid;
    let spendByIssueTxHex = issueTxHex;

    /* from next issue */

    let lockingScript0, lockingScript1;
    if (false) {
      preUtxoTxId = issueTxid;
      preUtxoOutputIndex = 0;
      preUtxoTxHex = issueTxHex;

      issueTxid = "5d8fc6c58554f4669730552a6da63a564e946410453aa62bca54200974fa6ea6";
      issueTxHex =
        "0100000002f3dcf49d8f88dc5c9fa56abfdd0acedf58d559af21610f674dd81f659e94a98c010000006b483045022100a6b7f6eca2613620946992a169f2ae80fb461df21973d509ef4406debb6c51300220788f46b03d110742851b99c2a663f112507a2443af8b28807a3596f140f720f1c12102fac240917b1bc22871af783b9a958661bc2b497b27f571a32fe6988e8ad2b38ffffffffff3dcf49d8f88dc5c9fa56abfdd0acedf58d559af21610f674dd81f659e94a98c00000000fd08174d7c150100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f3dcf49d8f88dc5c9fa56abfdd0acedf58d559af21610f674dd81f659e94a98c00000000fddd1451014001800176018801a901ac5801142464697361626c654f687465725574786f4d6f76696e6746726f6d47656e657369735478210100514c809dab2b44c64092d335c7b0ac8b6c9592ba0b355dc2e3cde75ac73d3eeeb5a31aeb056a17b9ca0f9200a1ea0a85d08a6a2e4430b16f0f58a2d584174d95f6e9dde317494d613eec9391993d85dc6b25a486aa631da5167d3d7fbd7efe4647dd625b88ac8a0a171de7f93c69afe3919c8d038566e35748a36cf9bfd7cd1a977b3d5d790087635a795d79855c798561011879517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac7777777777777777776177777777777777616961011879007901687f7501447f777761007901247f7501207f7700548087696101197961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079587987695179012054935b79935893519394537951790124937f7551797f77615779011f79011f79011f79011f7900000061615c7959795b79014c587982775179a0696161615979597959795e796161527952797e0079a8007982775296517951797f75a8527952797f77a87e77777761007901007e817761547955799552799751795379979c695177777777776169615a79007901687f7501447f777761007901207f755a7901207f758769005a7901200124937f7501207f7700795679876351527a75517a675b7982775479567993012493a0695b7954795679930124937f7554797f77577956790124937f75876351527a75517a68685179518769517777777777777761695c795c7951947f755c79519458947f77815d795b790120935493011679937f755b7901209354937f77012379a951798769012479012479ac695e795c797f7561012979616100790079827751795179012c947f7551790134947f77777761007901007e817761776151795d797e53797e54795193011a79807e0116797e61007952790079011c79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e77776153795f797e0127797e56795193011c79807e0117797e6100790127790079011e79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761610126790121790120797e011d797e51797e0121797e011f797e77616100790127790079012079806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761547953797e51797eaa007961013279007982775179517958947f7551790128947f77777761877777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777675d795187635a795d79855c798561011879517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac777777777777777777617777777777777761696101187961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079567987695179012054935a79935893519394615579011d79011d79011d79011d7900000061615b790111795a79014c587982775179a0696161615979597959795e796161527952797e0079a8007982775296517951797f75a8527952797f77a87e77777761007901007e817761547955799552799751795379979c695177777777776169615a79007901687f7501447f777761007901207f755a7901207f758769005a7901200124937f7501207f7700795679876351527a75517a675b7982775479567993012493a0695b7954795679930124937f7554797f77577956790124937f75876351527a75517a68685179518769517777777777777761695b7959790120935493011379937f75597901209354937f77012079a951798769012179012179ac695c795c7951947f755c79519458947f775d795b797f755e795c790124937f755c797f77517951797e0123797e53797e0113797e6100790123790079011a79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e77776161012279011d79011c797e0119797e51797e011d797e011b797e77616100790123790079011c79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761527951797eaa007961012e79007982775179517958947f7551790128947f777777618777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777675d795287635a795d79855c798561011379517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac777777777777777777617777777777777761696101137961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079567987695179012054935a799358935193945379517901209354935b79937f75517901209354937f77011679a951798769011779011779ac696101157960795f797e5c797e51797e60797e5e797e776161007901167900795f79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e7777610079aa007961011c79007982775179517958947f7551790128947f77777761877777777777777777777777777777777777777777777777777777777767006868686a41defc128d014cc8fe46e797ed753e229489b466dddfa4476745e0565150e3290201000000d3e990e3d6802a033c9b8d3c2ceda56dc06381260000000000000000008813000000000000ffffffff8d5c623af7154b656a34cc227fc72df75cbe59b6227a21dc1b0ac3c1c4d7f1ee00000000c10000004c800d936ee92c20f93102f8eff9a7dda7196c3af2023573b0f674ec1395b7ed32c38981071ab0c4d6ffed63fb81595604c5eb60939d9ecec3c9848b4e1f9e121dc553df9226dd33207e16c2b7bbd20c5f3ae0a45a057b5812ca1c2babd4a97a3ee4ca17f9152c950487ab0138ae5211547f9a940113f096f6b85e09ceb7f90b440c4c65f3dcf49d8f88dc5c9fa56abfdd0acedf58d559af21610f674dd81f659e94a98cdefc128d014cc8fe46e797ed753e229489b466dddfa4476745e0565150e32902010000002ce179000000000076a914d3e990e3d6802a033c9b8d3c2ceda56dc063812688ac02060047304402206a33ab3db6853a1ee78b731930d8bacce4f0976b4dc13b3a72f0faf7c128fee102201c3f0a57cd7b71e5d8f9e365169a21be964461c25715fac1ba080f2ddb13eb95c12102fac240917b1bc22871af783b9a958661bc2b497b27f571a32fe6988e8ad2b38f142edcd18e10de1a646169b19e3c83ec404c8685bd02881314d3e990e3d6802a033c9b8d3c2ceda56dc0638126044c02ba0100ffffffff038813000000000000fddd1451014001800176018801a901ac5801142464697361626c654f687465725574786f4d6f76696e6746726f6d47656e657369735478210100514c809dab2b44c64092d335c7b0ac8b6c9592ba0b355dc2e3cde75ac73d3eeeb5a31aeb056a17b9ca0f9200a1ea0a85d08a6a2e4430b16f0f58a2d584174d95f6e9dde317494d613eec9391993d85dc6b25a486aa631da5167d3d7fbd7efe4647dd625b88ac8a0a171de7f93c69afe3919c8d038566e35748a36cf9bfd7cd1a977b3d5d790087635a795d79855c798561011879517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac7777777777777777776177777777777777616961011879007901687f7501447f777761007901247f7501207f7700548087696101197961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079587987695179012054935b79935893519394537951790124937f7551797f77615779011f79011f79011f79011f7900000061615c7959795b79014c587982775179a0696161615979597959795e796161527952797e0079a8007982775296517951797f75a8527952797f77a87e77777761007901007e817761547955799552799751795379979c695177777777776169615a79007901687f7501447f777761007901207f755a7901207f758769005a7901200124937f7501207f7700795679876351527a75517a675b7982775479567993012493a0695b7954795679930124937f7554797f77577956790124937f75876351527a75517a68685179518769517777777777777761695c795c7951947f755c79519458947f77815d795b790120935493011679937f755b7901209354937f77012379a951798769012479012479ac695e795c797f7561012979616100790079827751795179012c947f7551790134947f77777761007901007e817761776151795d797e53797e54795193011a79807e0116797e61007952790079011c79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e77776153795f797e0127797e56795193011c79807e0117797e6100790127790079011e79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761610126790121790120797e011d797e51797e0121797e011f797e77616100790127790079012079806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761547953797e51797eaa007961013279007982775179517958947f7551790128947f77777761877777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777675d795187635a795d79855c798561011879517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac777777777777777777617777777777777761696101187961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079567987695179012054935a79935893519394615579011d79011d79011d79011d7900000061615b790111795a79014c587982775179a0696161615979597959795e796161527952797e0079a8007982775296517951797f75a8527952797f77a87e77777761007901007e817761547955799552799751795379979c695177777777776169615a79007901687f7501447f777761007901207f755a7901207f758769005a7901200124937f7501207f7700795679876351527a75517a675b7982775479567993012493a0695b7954795679930124937f7554797f77577956790124937f75876351527a75517a68685179518769517777777777777761695b7959790120935493011379937f75597901209354937f77012079a951798769012179012179ac695c795c7951947f755c79519458947f775d795b797f755e795c790124937f755c797f77517951797e0123797e53797e0113797e6100790123790079011a79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e77776161012279011d79011c797e0119797e51797e011d797e011b797e77616100790123790079011c79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761527951797eaa007961012e79007982775179517958947f7551790128947f777777618777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777675d795287635a795d79855c798561011379517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac777777777777777777617777777777777761696101137961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079567987695179012054935a799358935193945379517901209354935b79937f75517901209354937f77011679a951798769011779011779ac696101157960795f797e5c797e51797e60797e5e797e776161007901167900795f79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e7777610079aa007961011c79007982775179517958947f7551790128947f77777761877777777777777777777777777777777777777777777777777777777767006868686a41defc128d014cc8fe46e797ed753e229489b466dddfa4476745e0565150e3290201000000d3e990e3d6802a033c9b8d3c2ceda56dc06381260100000000000000008813000000000000fddd1451014001800176018801a901ac5801142464697361626c654f687465725574786f4d6f76696e6746726f6d47656e657369735478210100514c809dab2b44c64092d335c7b0ac8b6c9592ba0b355dc2e3cde75ac73d3eeeb5a31aeb056a17b9ca0f9200a1ea0a85d08a6a2e4430b16f0f58a2d584174d95f6e9dde317494d613eec9391993d85dc6b25a486aa631da5167d3d7fbd7efe4647dd625b88ac8a0a171de7f93c69afe3919c8d038566e35748a36cf9bfd7cd1a977b3d5d790087635a795d79855c798561011879517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac7777777777777777776177777777777777616961011879007901687f7501447f777761007901247f7501207f7700548087696101197961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079587987695179012054935b79935893519394537951790124937f7551797f77615779011f79011f79011f79011f7900000061615c7959795b79014c587982775179a0696161615979597959795e796161527952797e0079a8007982775296517951797f75a8527952797f77a87e77777761007901007e817761547955799552799751795379979c695177777777776169615a79007901687f7501447f777761007901207f755a7901207f758769005a7901200124937f7501207f7700795679876351527a75517a675b7982775479567993012493a0695b7954795679930124937f7554797f77577956790124937f75876351527a75517a68685179518769517777777777777761695c795c7951947f755c79519458947f77815d795b790120935493011679937f755b7901209354937f77012379a951798769012479012479ac695e795c797f7561012979616100790079827751795179012c947f7551790134947f77777761007901007e817761776151795d797e53797e54795193011a79807e0116797e61007952790079011c79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e77776153795f797e0127797e56795193011c79807e0117797e6100790127790079011e79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761610126790121790120797e011d797e51797e0121797e011f797e77616100790127790079012079806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761547953797e51797eaa007961013279007982775179517958947f7551790128947f77777761877777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777675d795187635a795d79855c798561011879517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac777777777777777777617777777777777761696101187961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079567987695179012054935a79935893519394615579011d79011d79011d79011d7900000061615b790111795a79014c587982775179a0696161615979597959795e796161527952797e0079a8007982775296517951797f75a8527952797f77a87e77777761007901007e817761547955799552799751795379979c695177777777776169615a79007901687f7501447f777761007901207f755a7901207f758769005a7901200124937f7501207f7700795679876351527a75517a675b7982775479567993012493a0695b7954795679930124937f7554797f77577956790124937f75876351527a75517a68685179518769517777777777777761695b7959790120935493011379937f75597901209354937f77012079a951798769012179012179ac695c795c7951947f755c79519458947f775d795b797f755e795c790124937f755c797f77517951797e0123797e53797e0113797e6100790123790079011a79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e77776161012279011d79011c797e0119797e51797e011d797e011b797e77616100790123790079011c79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761527951797eaa007961012e79007982775179517958947f7551790128947f777777618777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777675d795287635a795d79855c798561011379517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac777777777777777777617777777777777761696101137961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079567987695179012054935a799358935193945379517901209354935b79937f75517901209354937f77011679a951798769011779011779ac696101157960795f797e5c797e51797e60797e5e797e776161007901167900795f79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e7777610079aa007961011c79007982775179517958947f7551790128947f77777761877777777777777777777777777777777777777777777777777777777767006868686a41defc128d014cc8fe46e797ed753e229489b466dddfa4476745e0565150e32902010000002edcd18e10de1a646169b19e3c83ec404c8685bd0100000000000000014c02ba01000000001976a914d3e990e3d6802a033c9b8d3c2ceda56dc063812688ac00000000";
      uniqTokenId = 1;
      spendByIssueTxId = issueTxid;
      spendByIssueTxHex = issueTxHex;

      token.setDataPart(genesisOutpoint + toHex(publicKeyHashIssuer) + num2bin(uniqTokenId, DataLen8) + actionIssue);
      const tx = await createPayByOthersTx(privateKey.toAddress());
      tx.addInput(
        new bsv.Transaction.Input({
          prevTxId: issueTxid,
          outputIndex: 0,
          script: "",
        }),
        token.lockingScript,
        issueSatoshis
      );

      const curInputIndex = tx.inputs.length - 1;

      // issue new token
      lockingScript0 = [token.codePart.toASM(), genesisOutpoint + toHex(publicKeyHashIssuer) + num2bin(uniqTokenId + 1, DataLen8) + actionIssue].join(" ");
      tx.addOutput(
        new bsv.Transaction.Output({
          script: bsv.Script.fromASM(lockingScript0),
          satoshis: issueSatoshis,
        })
      );

      // transfer previous token to another receiver
      lockingScript1 = [token.codePart.toASM(), genesisOutpoint + toHex(publicKeyHashReceiver1) + num2bin(uniqTokenId + 1, DataLen8) + actionTransfer].join(" ");
      tx.addOutput(
        new bsv.Transaction.Output({
          script: bsv.Script.fromASM(lockingScript1),
          satoshis: transferSatoshis,
        })
      );
      tx.change(privateKey.toAddress()).fee(FEE);

      const changeAmount = tx.inputAmount - FEE - issueSatoshis - transferSatoshis;

      const preimage = getPreimage(tx, token.lockingScript.toASM(), issueSatoshis, curInputIndex, sighashType);
      const sig1 = signTx(tx, privateKeyIssuer, token.lockingScript.toASM(), issueSatoshis, curInputIndex, sighashType);

      // 获取Oracle签名
      let sigInfo = await satoTxSigUTXOSpendBy(preUtxoTxId, preUtxoOutputIndex, spendByIssueTxId, preUtxoTxHex, spendByIssueTxHex);
      // console.log("satoTxSigUTXOSpendBy:", sigInfo);
      const preTxOutpointSig = BigInt("0x" + sigInfo.sigBE);
      const preTxOutpointMsg = sigInfo.payload;
      const preTxOutpointPadding = sigInfo.padding;

      const unlockingScript = token
        .issue(
          new SigHashPreimage(toHex(preimage)),
          preTxOutpointSig,
          new Bytes(preTxOutpointMsg),
          new Bytes(preTxOutpointPadding),
          new Sig(toHex(sig1)),
          new PubKey(toHex(publicKeyIssuer)),
          new Ripemd160(toHex(publicKeyHashReceiver1)),
          transferSatoshis,
          new Ripemd160(toHex(publicKeyHashIssuer)),
          changeAmount
        )
        .toScript();

      // unlock other p2pkh inputs
      for (let i = 0; i < curInputIndex; i++) {
        unlockP2PKHInput(privateKey, tx, i, sighashType);
      }
      tx.inputs[curInputIndex].setScript(unlockingScript);
      issueTxid = await sendTx(tx);
      // issueTxid = tx.id;
      issueTxHex = tx.serialize();
      console.log("issue txid:       ", issueTxid);
      console.log("issue txhex:       ", issueTxHex);
      return;
    }

    // transfer token to publicKeyReceiver2
    if (true) {
      preUtxoTxId = issueTxid;
      preUtxoOutputIndex = 0;
      preUtxoTxHex = issueTxHex;

      issueTxid = "5d8fc6c58554f4669730552a6da63a564e946410453aa62bca54200974fa6ea6";
      issueTxHex =
        "0100000002f3dcf49d8f88dc5c9fa56abfdd0acedf58d559af21610f674dd81f659e94a98c010000006b483045022100a6b7f6eca2613620946992a169f2ae80fb461df21973d509ef4406debb6c51300220788f46b03d110742851b99c2a663f112507a2443af8b28807a3596f140f720f1c12102fac240917b1bc22871af783b9a958661bc2b497b27f571a32fe6988e8ad2b38ffffffffff3dcf49d8f88dc5c9fa56abfdd0acedf58d559af21610f674dd81f659e94a98c00000000fd08174d7c150100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f3dcf49d8f88dc5c9fa56abfdd0acedf58d559af21610f674dd81f659e94a98c00000000fddd1451014001800176018801a901ac5801142464697361626c654f687465725574786f4d6f76696e6746726f6d47656e657369735478210100514c809dab2b44c64092d335c7b0ac8b6c9592ba0b355dc2e3cde75ac73d3eeeb5a31aeb056a17b9ca0f9200a1ea0a85d08a6a2e4430b16f0f58a2d584174d95f6e9dde317494d613eec9391993d85dc6b25a486aa631da5167d3d7fbd7efe4647dd625b88ac8a0a171de7f93c69afe3919c8d038566e35748a36cf9bfd7cd1a977b3d5d790087635a795d79855c798561011879517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac7777777777777777776177777777777777616961011879007901687f7501447f777761007901247f7501207f7700548087696101197961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079587987695179012054935b79935893519394537951790124937f7551797f77615779011f79011f79011f79011f7900000061615c7959795b79014c587982775179a0696161615979597959795e796161527952797e0079a8007982775296517951797f75a8527952797f77a87e77777761007901007e817761547955799552799751795379979c695177777777776169615a79007901687f7501447f777761007901207f755a7901207f758769005a7901200124937f7501207f7700795679876351527a75517a675b7982775479567993012493a0695b7954795679930124937f7554797f77577956790124937f75876351527a75517a68685179518769517777777777777761695c795c7951947f755c79519458947f77815d795b790120935493011679937f755b7901209354937f77012379a951798769012479012479ac695e795c797f7561012979616100790079827751795179012c947f7551790134947f77777761007901007e817761776151795d797e53797e54795193011a79807e0116797e61007952790079011c79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e77776153795f797e0127797e56795193011c79807e0117797e6100790127790079011e79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761610126790121790120797e011d797e51797e0121797e011f797e77616100790127790079012079806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761547953797e51797eaa007961013279007982775179517958947f7551790128947f77777761877777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777675d795187635a795d79855c798561011879517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac777777777777777777617777777777777761696101187961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079567987695179012054935a79935893519394615579011d79011d79011d79011d7900000061615b790111795a79014c587982775179a0696161615979597959795e796161527952797e0079a8007982775296517951797f75a8527952797f77a87e77777761007901007e817761547955799552799751795379979c695177777777776169615a79007901687f7501447f777761007901207f755a7901207f758769005a7901200124937f7501207f7700795679876351527a75517a675b7982775479567993012493a0695b7954795679930124937f7554797f77577956790124937f75876351527a75517a68685179518769517777777777777761695b7959790120935493011379937f75597901209354937f77012079a951798769012179012179ac695c795c7951947f755c79519458947f775d795b797f755e795c790124937f755c797f77517951797e0123797e53797e0113797e6100790123790079011a79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e77776161012279011d79011c797e0119797e51797e011d797e011b797e77616100790123790079011c79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761527951797eaa007961012e79007982775179517958947f7551790128947f777777618777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777675d795287635a795d79855c798561011379517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac777777777777777777617777777777777761696101137961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079567987695179012054935a799358935193945379517901209354935b79937f75517901209354937f77011679a951798769011779011779ac696101157960795f797e5c797e51797e60797e5e797e776161007901167900795f79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e7777610079aa007961011c79007982775179517958947f7551790128947f77777761877777777777777777777777777777777777777777777777777777777767006868686a41defc128d014cc8fe46e797ed753e229489b466dddfa4476745e0565150e3290201000000d3e990e3d6802a033c9b8d3c2ceda56dc06381260000000000000000008813000000000000ffffffff8d5c623af7154b656a34cc227fc72df75cbe59b6227a21dc1b0ac3c1c4d7f1ee00000000c10000004c800d936ee92c20f93102f8eff9a7dda7196c3af2023573b0f674ec1395b7ed32c38981071ab0c4d6ffed63fb81595604c5eb60939d9ecec3c9848b4e1f9e121dc553df9226dd33207e16c2b7bbd20c5f3ae0a45a057b5812ca1c2babd4a97a3ee4ca17f9152c950487ab0138ae5211547f9a940113f096f6b85e09ceb7f90b440c4c65f3dcf49d8f88dc5c9fa56abfdd0acedf58d559af21610f674dd81f659e94a98cdefc128d014cc8fe46e797ed753e229489b466dddfa4476745e0565150e32902010000002ce179000000000076a914d3e990e3d6802a033c9b8d3c2ceda56dc063812688ac02060047304402206a33ab3db6853a1ee78b731930d8bacce4f0976b4dc13b3a72f0faf7c128fee102201c3f0a57cd7b71e5d8f9e365169a21be964461c25715fac1ba080f2ddb13eb95c12102fac240917b1bc22871af783b9a958661bc2b497b27f571a32fe6988e8ad2b38f142edcd18e10de1a646169b19e3c83ec404c8685bd02881314d3e990e3d6802a033c9b8d3c2ceda56dc0638126044c02ba0100ffffffff038813000000000000fddd1451014001800176018801a901ac5801142464697361626c654f687465725574786f4d6f76696e6746726f6d47656e657369735478210100514c809dab2b44c64092d335c7b0ac8b6c9592ba0b355dc2e3cde75ac73d3eeeb5a31aeb056a17b9ca0f9200a1ea0a85d08a6a2e4430b16f0f58a2d584174d95f6e9dde317494d613eec9391993d85dc6b25a486aa631da5167d3d7fbd7efe4647dd625b88ac8a0a171de7f93c69afe3919c8d038566e35748a36cf9bfd7cd1a977b3d5d790087635a795d79855c798561011879517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac7777777777777777776177777777777777616961011879007901687f7501447f777761007901247f7501207f7700548087696101197961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079587987695179012054935b79935893519394537951790124937f7551797f77615779011f79011f79011f79011f7900000061615c7959795b79014c587982775179a0696161615979597959795e796161527952797e0079a8007982775296517951797f75a8527952797f77a87e77777761007901007e817761547955799552799751795379979c695177777777776169615a79007901687f7501447f777761007901207f755a7901207f758769005a7901200124937f7501207f7700795679876351527a75517a675b7982775479567993012493a0695b7954795679930124937f7554797f77577956790124937f75876351527a75517a68685179518769517777777777777761695c795c7951947f755c79519458947f77815d795b790120935493011679937f755b7901209354937f77012379a951798769012479012479ac695e795c797f7561012979616100790079827751795179012c947f7551790134947f77777761007901007e817761776151795d797e53797e54795193011a79807e0116797e61007952790079011c79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e77776153795f797e0127797e56795193011c79807e0117797e6100790127790079011e79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761610126790121790120797e011d797e51797e0121797e011f797e77616100790127790079012079806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761547953797e51797eaa007961013279007982775179517958947f7551790128947f77777761877777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777675d795187635a795d79855c798561011879517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac777777777777777777617777777777777761696101187961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079567987695179012054935a79935893519394615579011d79011d79011d79011d7900000061615b790111795a79014c587982775179a0696161615979597959795e796161527952797e0079a8007982775296517951797f75a8527952797f77a87e77777761007901007e817761547955799552799751795379979c695177777777776169615a79007901687f7501447f777761007901207f755a7901207f758769005a7901200124937f7501207f7700795679876351527a75517a675b7982775479567993012493a0695b7954795679930124937f7554797f77577956790124937f75876351527a75517a68685179518769517777777777777761695b7959790120935493011379937f75597901209354937f77012079a951798769012179012179ac695c795c7951947f755c79519458947f775d795b797f755e795c790124937f755c797f77517951797e0123797e53797e0113797e6100790123790079011a79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e77776161012279011d79011c797e0119797e51797e011d797e011b797e77616100790123790079011c79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761527951797eaa007961012e79007982775179517958947f7551790128947f777777618777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777675d795287635a795d79855c798561011379517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac777777777777777777617777777777777761696101137961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079567987695179012054935a799358935193945379517901209354935b79937f75517901209354937f77011679a951798769011779011779ac696101157960795f797e5c797e51797e60797e5e797e776161007901167900795f79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e7777610079aa007961011c79007982775179517958947f7551790128947f77777761877777777777777777777777777777777777777777777777777777777767006868686a41defc128d014cc8fe46e797ed753e229489b466dddfa4476745e0565150e3290201000000d3e990e3d6802a033c9b8d3c2ceda56dc06381260100000000000000008813000000000000fddd1451014001800176018801a901ac5801142464697361626c654f687465725574786f4d6f76696e6746726f6d47656e657369735478210100514c809dab2b44c64092d335c7b0ac8b6c9592ba0b355dc2e3cde75ac73d3eeeb5a31aeb056a17b9ca0f9200a1ea0a85d08a6a2e4430b16f0f58a2d584174d95f6e9dde317494d613eec9391993d85dc6b25a486aa631da5167d3d7fbd7efe4647dd625b88ac8a0a171de7f93c69afe3919c8d038566e35748a36cf9bfd7cd1a977b3d5d790087635a795d79855c798561011879517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac7777777777777777776177777777777777616961011879007901687f7501447f777761007901247f7501207f7700548087696101197961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079587987695179012054935b79935893519394537951790124937f7551797f77615779011f79011f79011f79011f7900000061615c7959795b79014c587982775179a0696161615979597959795e796161527952797e0079a8007982775296517951797f75a8527952797f77a87e77777761007901007e817761547955799552799751795379979c695177777777776169615a79007901687f7501447f777761007901207f755a7901207f758769005a7901200124937f7501207f7700795679876351527a75517a675b7982775479567993012493a0695b7954795679930124937f7554797f77577956790124937f75876351527a75517a68685179518769517777777777777761695c795c7951947f755c79519458947f77815d795b790120935493011679937f755b7901209354937f77012379a951798769012479012479ac695e795c797f7561012979616100790079827751795179012c947f7551790134947f77777761007901007e817761776151795d797e53797e54795193011a79807e0116797e61007952790079011c79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e77776153795f797e0127797e56795193011c79807e0117797e6100790127790079011e79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761610126790121790120797e011d797e51797e0121797e011f797e77616100790127790079012079806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761547953797e51797eaa007961013279007982775179517958947f7551790128947f77777761877777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777675d795187635a795d79855c798561011879517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac777777777777777777617777777777777761696101187961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079567987695179012054935a79935893519394615579011d79011d79011d79011d7900000061615b790111795a79014c587982775179a0696161615979597959795e796161527952797e0079a8007982775296517951797f75a8527952797f77a87e77777761007901007e817761547955799552799751795379979c695177777777776169615a79007901687f7501447f777761007901207f755a7901207f758769005a7901200124937f7501207f7700795679876351527a75517a675b7982775479567993012493a0695b7954795679930124937f7554797f77577956790124937f75876351527a75517a68685179518769517777777777777761695b7959790120935493011379937f75597901209354937f77012079a951798769012179012179ac695c795c7951947f755c79519458947f775d795b797f755e795c790124937f755c797f77517951797e0123797e53797e0113797e6100790123790079011a79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e77776161012279011d79011c797e0119797e51797e011d797e011b797e77616100790123790079011c79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e777761527951797eaa007961012e79007982775179517958947f7551790128947f777777618777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777675d795287635a795d79855c798561011379517920ea401e7cedf9c428fbf9b92b75c90dfdd354394e58195d58e82bf79a8de31d622102773aca113a3217b67a95d5b78b69bb6386ed443ea5decf0ba92c00d1792919212108dc7dc8b865cafc4cb5ff38624ba4c5385a3b8d7381f5bb49ba4a55963f10a20021606bfc5df21a9603c63d49e178b0620c9953d37c7ddeddfc12580925da43fcf0002100f0fc43da25095812fcddde7d7cd353990c62b078e1493dc603961af25dfc6b60615679557955795579557955795b795679aa616100790079517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e01007e81776157795679567956795679537956795479577995939521414136d08c5ed2bf3ba048afe6dcaebafeffffffffffffffffffffffffffffff0061517951795179517997527a75517a5179009f635179517993527a75517a685179777761527a75517a517951795296a0630079527994527a75517a68537982775279827754527993517993013051797e527e53797e57797e527e52797e5579517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f517f7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7c7e7e56797e00797777777777777777777777776100795779ac777777777777777777617777777777777761696101137961007901687f7700005279517f75007f77007901fd8763615379537f75517f77007901007e817761537a75527a527a5379535479937f75537f77527a75517a67007901fe8763615379557f75517f77007901007e817761537a75527a527a5379555479937f75557f77527a75517a67007901ff8763615379597f75517f77007901007e817761537a75527a527a5379595479937f75597f77527a75517a67615379517f75007f77007901007e817761537a75527a527a5379515479937f75517f77527a75517a686868517977777777617761007982775179517951947f770079567987695179012054935a799358935193945379517901209354935b79937f75517901209354937f77011679a951798769011779011779ac696101157960795f797e5c797e51797e60797e5e797e776161007901167900795f79806152790079827700517902fd009f63615179515179517951938000795179827751947f75007f7777777761517a75675179030000019f6301fd615279525179517951938000795179827751947f75007f77777777617e517a756751790500000000019f6301fe615279545179517951938000795179827751947f75007f77777777617e517a75675179090000000000000000019f6301ff615279585179517951938000795179827751947f75007f77777777617e517a7568686868007953797e777777617e7777610079aa007961011c79007982775179517958947f7551790128947f77777761877777777777777777777777777777777777777777777777777777777767006868686a41defc128d014cc8fe46e797ed753e229489b466dddfa4476745e0565150e32902010000002edcd18e10de1a646169b19e3c83ec404c8685bd0100000000000000014c02ba01000000001976a914d3e990e3d6802a033c9b8d3c2ceda56dc063812688ac00000000";
      uniqTokenId = 1;
      spendByIssueTxId = issueTxid;
      spendByIssueTxHex = issueTxHex;

      token.setDataPart(genesisOutpoint + toHex(publicKeyHashReceiver1) + num2bin(uniqTokenId, DataLen8) + actionTransfer);
      const tx = await createPayByOthersTx(privateKey.toAddress());
      tx.addInput(
        new bsv.Transaction.Input({
          prevTxId: issueTxid,
          outputIndex: 1,
          script: "",
        }),
        token.lockingScript,
        transferSatoshis
      );

      const curInputIndex = tx.inputs.length - 1;

      // transfer token to other one
      lockingScript0 = [token.codePart.toASM(), genesisOutpoint + toHex(publicKeyHashReceiver2) + num2bin(uniqTokenId, DataLen8) + actionTransfer].join(" ");
      tx.addOutput(
        new bsv.Transaction.Output({
          script: bsv.Script.fromASM(lockingScript0),
          satoshis: transferSatoshis,
        })
      );

      tx.change(privateKey.toAddress()).fee(FEE);

      const changeAmount = tx.inputAmount - FEE - transferSatoshis;

      const preimage = getPreimage(tx, token.lockingScript.toASM(), transferSatoshis, curInputIndex, sighashType);
      const sig1 = signTx(tx, privateKeyReceiver1, token.lockingScript.toASM(), transferSatoshis, curInputIndex, sighashType);

      // 获取Oracle签名
      let sigInfo = await satoTxSigUTXOSpendBy(preUtxoTxId, preUtxoOutputIndex, spendByIssueTxId, preUtxoTxHex, spendByIssueTxHex);
      // console.log("satoTxSigUTXOSpendBy:", sigInfo);
      const preTxOutpointSig = BigInt("0x" + sigInfo.sigBE);
      const preTxOutpointMsg = sigInfo.payload;
      const preTxOutpointPadding = sigInfo.padding;

      const unlockingScript = token
        .transfer(
          new SigHashPreimage(toHex(preimage)),
          preTxOutpointSig,
          new Bytes(preTxOutpointMsg),
          new Bytes(preTxOutpointPadding),
          new Sig(toHex(sig1)),
          new PubKey(toHex(publicKeyReceiver1)),
          new Ripemd160(toHex(publicKeyHashReceiver2)),
          transferSatoshis,
          new Ripemd160(toHex(publicKeyHashIssuer)),
          changeAmount
        )
        .toScript();

      // unlock other p2pkh inputs
      for (let i = 0; i < curInputIndex; i++) {
        unlockP2PKHInput(privateKey, tx, i, sighashType);
      }
      tx.inputs[curInputIndex].setScript(unlockingScript);
      transferTxid = await sendTx(tx);
      // transferTxid = tx.id;
      transferTxHex = tx.serialize();
      console.log("transfer txid:       ", transferTxid);
      console.log("transfer txhex:       ", transferTxHex);
      return;
    }

    console.log("Succeeded on testnet");
  } catch (error) {
    console.log("Failed on testnet");
    showError(error);
  }
})();
